<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Datafix.Worklist.Internal</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Datafix.Worklist.Internal.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">datafix-0.0.0.2: Fixing data-flow problems</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Sebastian Graf 2018</td></tr><tr><th>License</th><td>ISC</td></tr><tr><th>Maintainer</th><td>sgraf1337@gmail.com</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Datafix.Worklist.Internal</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Internal module, does not follow the PVP. Breaking changes may happen at
 any minor version.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span> <a href="#t:DependencyM">DependencyM</a> graph domain a = <a href="#v:DM">DM</a> (<a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Env">Env</a> graph domain = <a href="#v:Env">Env</a> {<ul class="subs"><li><a href="#v:problem">problem</a> :: !(<a href="Datafix-Explicit.html#t:DataFlowProblem">DataFlowProblem</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain))</li><li><a href="#v:iterationBound">iterationBound</a> :: !(<a href="Datafix-Worklist-Internal.html#t:IterationBound">IterationBound</a> domain)</li><li><a href="#v:callStack">callStack</a> :: !(IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain)))</li><li><a href="#v:graph">graph</a> :: !(graph domain)</li><li><a href="#v:referencedPoints">referencedPoints</a> :: !(<a href="../base-4.10.1.0/Data-IORef.html#t:IORef">IORef</a> (IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain))))</li><li><a href="#v:unstable">unstable</a> :: !(<a href="../base-4.10.1.0/Data-IORef.html#t:IORef">IORef</a> (IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain))))</li></ul>}</li><li class="src short"><a href="#v:initialEnv">initialEnv</a> :: IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain)) -&gt; <a href="Datafix-Explicit.html#t:DataFlowProblem">DataFlowProblem</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain) -&gt; <a href="Datafix-Worklist-Internal.html#t:IterationBound">IterationBound</a> domain -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (graph domain) -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Density">Density</a> graph <span class="keyword">where</span><ul class="subs"><li><a href="#v:Sparse">Sparse</a> :: <a href="Datafix-Worklist-Internal.html#t:Density">Density</a> <a href="Datafix-Worklist-Graph-Sparse.html#t:Ref">Ref</a></li><li><a href="#v:Dense">Dense</a> :: <a href="Datafix-Explicit.html#t:Node">Node</a> -&gt; <a href="Datafix-Worklist-Internal.html#t:Density">Density</a> <a href="Datafix-Worklist-Graph-Dense.html#t:Ref">Ref</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:AbortionFunction">AbortionFunction</a> domain = <a href="Datafix-Utils-TypeLevel.html#t:Arrows">Arrows</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain -&gt; <a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain)</li><li class="src short"><a href="#v:abortWithTop">abortWithTop</a> :: <span class="keyword">forall</span> domain. <a href="Datafix-Utils-TypeLevel.html#t:Currying">Currying</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain -&gt; <a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) =&gt; BoundedMeetSemiLattice (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) =&gt; <a href="Datafix-Worklist-Internal.html#t:AbortionFunction">AbortionFunction</a> domain</li><li class="src short"><span class="keyword">data</span> <a href="#t:IterationBound">IterationBound</a> domain<ul class="subs"><li>= <a href="#v:NeverAbort">NeverAbort</a></li><li>| <a href="#v:AbortAfter">AbortAfter</a> <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> (<a href="Datafix-Worklist-Internal.html#t:AbortionFunction">AbortionFunction</a> domain)</li></ul></li><li class="src short"><a href="#v:zoomIORef">zoomIORef</a> :: <a href="../transformers-0.5.2.0/Control-Monad-Trans-State-Strict.html#t:State">State</a> s a -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="../base-4.10.1.0/Data-IORef.html#t:IORef">IORef</a> s) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:zoomReferencedPoints">zoomReferencedPoints</a> :: <a href="../transformers-0.5.2.0/Control-Monad-Trans-State-Strict.html#t:State">State</a> (IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain))) a -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:zoomUnstable">zoomUnstable</a> :: <a href="../transformers-0.5.2.0/Control-Monad-Trans-State-Strict.html#t:State">State</a> (IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain))) a -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:enqueueUnstable">enqueueUnstable</a> :: k ~ <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) =&gt; <a href="Datafix-MonoMap.html#t:MonoMapKey">MonoMapKey</a> k =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; k -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:deleteUnstable">deleteUnstable</a> :: k ~ <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) =&gt; <a href="Datafix-MonoMap.html#t:MonoMapKey">MonoMapKey</a> k =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; k -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:highestPriorityUnstableNode">highestPriorityUnstableNode</a> :: k ~ <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) =&gt; <a href="Datafix-MonoMap.html#t:MonoMapKey">MonoMapKey</a> k =&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a>, k))</li><li class="src short"><a href="#v:withCall">withCall</a> :: <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:recompute">recompute</a> :: <span class="keyword">forall</span> domain graph dom cod depm. dom ~ <a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain =&gt; cod ~ <a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain =&gt; depm ~ <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain =&gt; <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> dom -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> cod</li><li class="src short"><a href="#v:dependOn">dependOn</a> :: <span class="keyword">forall</span> domain graph depm. depm ~ <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Explicit.html#t:Node">Node</a> -&gt; <a href="Datafix-Common.html#t:LiftedFunc">LiftedFunc</a> domain depm</li><li class="src short"><a href="#v:optimisticApproximation">optimisticApproximation</a> :: <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain)</li><li class="src short"><a href="#v:scheme1">scheme1</a> :: <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain)</li><li class="src short"><a href="#v:scheme2">scheme2</a> :: <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain)</li><li class="src short"><a href="#v:whileJust_">whileJust_</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; m (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; (a -&gt; m b) -&gt; m ()</li><li class="src short"><a href="#v:work">work</a> :: <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:solveProblem">solveProblem</a> :: <span class="keyword">forall</span> domain graph. <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="Datafix-Explicit.html#t:DataFlowProblem">DataFlowProblem</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain) -&gt; <a href="Datafix-Worklist-Internal.html#t:Density">Density</a> graph -&gt; <a href="Datafix-Worklist-Internal.html#t:IterationBound">IterationBound</a> domain -&gt; <a href="Datafix-Explicit.html#t:Node">Node</a> -&gt; domain</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:DependencyM" class="def">DependencyM</a> graph domain a <a href="src/Datafix.Worklist.Internal.html#DependencyM" class="link">Source</a> <a href="#t:DependencyM" class="selflink">#</a></p><div class="doc"><p>The concrete <code><a href="Datafix-Explicit.html#t:MonadDependency">MonadDependency</a></code> for this worklist-based solver.</p><p>This essentially tracks the current approximation of the solution to the
 <code><a href="Datafix-Explicit.html#t:DataFlowProblem">DataFlowProblem</a></code> as mutable state while <code><a href="Datafix-Worklist-Internal.html#v:solveProblem">solveProblem</a></code> makes sure we will eventually
 halt with a conservative approximation.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DM" class="def">DM</a> (<a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a)</td><td class="doc"><p>Why does this use <code><a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a></code>? Actually, we only need <code>ST</code> here, but that
 means we have to carry around the state thread in type signatures.</p><p>This ultimately leaks badly into the exported interface in <code><a href="Datafix-Worklist-Internal.html#v:solveProblem">solveProblem</a></code>:
 Since we can't have universally quantified instance contexts (yet!), we can' write
 <code>(forall s. Datafixable domain =&gt; (forall s. DataFlowProblem (DependencyM s graph domain)) -&gt; ...</code>
 and have to instead have the isomorphic
 <code>(forall s r. (Datafixable domain =&gt; r) -&gt; r) -&gt; (forall s. DataFlowProblem (DependencyM s graph domain)) -&gt; ...</code>
 and urge all call sites to pass a meaningless <code><a href="../base-4.10.1.0/Data-Function.html#v:id">id</a></code> parameter.</p><p>Also, this means more explicit type signatures as we have to make clear to
 the type-checker that <code>s</code> is universally quantified in everything that
 touches it, e.g. <code>Analyses.StrAnal.LetDn.buildProblem</code> from the test suite.</p><p>So, bottom line: We resort to <code><a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a></code> and <code><a href="../base-4.10.1.0/System-IO-Unsafe.html#v:unsafePerformIO">unsafePerformIO</a></code> and promise not to
 launch missiles. In particular, we don't export <code><a href="Datafix-Worklist-Internal.html#v:DM">DM</a></code> and also there
 must never be an instance of <code>MonadIO</code> for this.</p></td></tr></table></div><div class="subs instances"><p id="control.i:DependencyM" class="caption collapser" onclick="toggleSection('i:DependencyM')">Instances</p><div id="section.i:DependencyM" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DependencyM:Monad:1" class="instance expander" onclick="toggleSection('i:id:DependencyM:Monad:1')"></span> <a href="../base-4.10.1.0/Control-Monad.html#t:Monad">Monad</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain)</span> <a href="src/Datafix.Worklist.Internal.html#line-75" class="link">Source</a> <a href="#t:DependencyM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DependencyM:Monad:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a -&gt; (a -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain b) -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain b -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a <a href="#v:return" class="selflink">#</a></p><p class="src"><a href="#v:fail">fail</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a <a href="#v:fail" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DependencyM:Functor:2" class="instance expander" onclick="toggleSection('i:id:DependencyM:Functor:2')"></span> <a href="../base-4.10.1.0/Data-Functor.html#t:Functor">Functor</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain)</span> <a href="src/Datafix.Worklist.Internal.html#line-75" class="link">Source</a> <a href="#t:DependencyM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DependencyM:Functor:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain b -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a <a href="#v:-60--36-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DependencyM:Applicative:3" class="instance expander" onclick="toggleSection('i:id:DependencyM:Applicative:3')"></span> <a href="../base-4.10.1.0/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain)</span> <a href="src/Datafix.Worklist.Internal.html#line-75" class="link">Source</a> <a href="#t:DependencyM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DependencyM:Applicative:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain (a -&gt; b) -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain b -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain b -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain b -&gt; <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain a <a href="#v:-60--42-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DependencyM:MonadDomain:4" class="instance expander" onclick="toggleSection('i:id:DependencyM:MonadDomain:4')"></span> <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="Datafix-Common.html#t:MonadDomain">MonadDomain</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain)</span> <a href="src/Datafix.Worklist.Internal.html#line-115" class="link">Source</a> <a href="#t:DependencyM" class="selflink">#</a></td><td class="doc"><p>The <code><a href="Datafix-Common.html#t:Domain">Domain</a></code> is extracted from a type parameter.</p></td></tr><tr><td colspan="2"><div id="section.i:id:DependencyM:MonadDomain:4" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Datafix-Common.html#t:Domain">Domain</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a>) :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="src/Datafix.Common.html#Domain" class="link">Source</a> <a href="#t:Domain" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DependencyM:MonadDependency:5" class="instance expander" onclick="toggleSection('i:id:DependencyM:MonadDependency:5')"></span> (<a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain, <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph) =&gt; <a href="Datafix-Explicit.html#t:MonadDependency">MonadDependency</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain)</span> <a href="src/Datafix.Worklist.Internal.html#line-120" class="link">Source</a> <a href="#t:DependencyM" class="selflink">#</a></td><td class="doc"><p>This allows us to solve <code>MonadDependency m =&gt; DataFlowProblem m</code> descriptions
 with <code><a href="Datafix-Worklist-Internal.html#v:solveProblem">solveProblem</a></code>.</p></td></tr><tr><td colspan="2"><div id="section.i:id:DependencyM:MonadDependency:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:dependOn">dependOn</a> :: <a href="Datafix-Explicit.html#t:Node">Node</a> -&gt; <a href="Datafix-Common.html#t:LiftedFunc">LiftedFunc</a> (<a href="Datafix-Common.html#t:Domain">Domain</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain)) (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain) <a href="src/Datafix.Explicit.html#dependOn" class="link">Source</a> <a href="#v:dependOn" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DependencyM:Domain:6" class="instance expander" onclick="toggleSection('i:id:DependencyM:Domain:6')"></span> <span class="keyword">type</span> <a href="Datafix-Common.html#t:Domain">Domain</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain)</span> <a href="src/Datafix.Worklist.Internal.html#line-116" class="link">Source</a> <a href="#t:DependencyM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DependencyM:Domain:6" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="Datafix-Common.html#t:Domain">Domain</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain) = domain</div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Env" class="def">Env</a> graph domain <a href="src/Datafix.Worklist.Internal.html#Env" class="link">Source</a> <a href="#t:Env" class="selflink">#</a></p><div class="doc"><p>The iteration state of 'DependencyM'/'solveProblem'.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Env" class="def">Env</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:problem" class="def">problem</a> :: !(<a href="Datafix-Explicit.html#t:DataFlowProblem">DataFlowProblem</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain))</dfn><div class="doc"><p>Constant.
 The specification of the data-flow problem we ought to solve.</p></div></li><li><dfn class="src"><a id="v:iterationBound" class="def">iterationBound</a> :: !(<a href="Datafix-Worklist-Internal.html#t:IterationBound">IterationBound</a> domain)</dfn><div class="doc"><p>Constant.
 Whether to abort after a number of iterations or not.</p></div></li><li><dfn class="src"><a id="v:callStack" class="def">callStack</a> :: !(IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain)))</dfn><div class="doc"><p>Contextual state.
 The set of points in the <code>domain</code> of <code><a href="Datafix-Explicit.html#t:Node">Node</a></code>s currently in the call stack.</p></div></li><li><dfn class="src"><a id="v:graph" class="def">graph</a> :: !(graph domain)</dfn><div class="doc"><p>Constant ref to stateful graph.
 The data-flow graph, modeling dependencies between data-flow <code><a href="Datafix-Explicit.html#t:Node">Node</a></code>s,
 or rather specific points in the <code>domain</code> of each <code><a href="Datafix-Explicit.html#t:Node">Node</a></code>.</p></div></li><li><dfn class="src"><a id="v:referencedPoints" class="def">referencedPoints</a> :: !(<a href="../base-4.10.1.0/Data-IORef.html#t:IORef">IORef</a> (IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain))))</dfn><div class="doc"><p>Constant (but the the wrapped set is stateful).
 The set of points the currently <code><a href="Datafix-Worklist-Internal.html#v:recompute">recompute</a></code>d node references so far.</p></div></li><li><dfn class="src"><a id="v:unstable" class="def">unstable</a> :: !(<a href="../base-4.10.1.0/Data-IORef.html#t:IORef">IORef</a> (IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain))))</dfn><div class="doc"><p>Constant (but the the wrapped queue is stateful).
 Unstable nodes that will be <code><a href="Datafix-Worklist-Internal.html#v:recompute">recompute</a></code>d by the <code><a href="Datafix-Worklist-Internal.html#v:work">work</a></code>list algorithm.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:initialEnv" class="def">initialEnv</a> :: IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain)) -&gt; <a href="Datafix-Explicit.html#t:DataFlowProblem">DataFlowProblem</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain) -&gt; <a href="Datafix-Worklist-Internal.html#t:IterationBound">IterationBound</a> domain -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (graph domain) -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="src/Datafix.Worklist.Internal.html#initialEnv" class="link">Source</a> <a href="#v:initialEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Density" class="def">Density</a> graph <span class="keyword">where</span> <a href="src/Datafix.Worklist.Internal.html#Density" class="link">Source</a> <a href="#t:Density" class="selflink">#</a></p><div class="doc"><p>Specifies the <em>density</em> of the problem, e.g. whether the domain of
 <code><a href="Datafix-Explicit.html#t:Node">Node</a></code>s can be confined to a finite range, in which case <code><a href="Datafix-Worklist-Internal.html#v:solveProblem">solveProblem</a></code>
 tries to use a <a href="Data-Vector.html">Data.Vector</a> based graph representation rather than
 one based on <a href="../containers-0.5.10.2/Data-IntMap.html">Data.IntMap</a>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Sparse" class="def">Sparse</a> :: <a href="Datafix-Worklist-Internal.html#t:Density">Density</a> <a href="Datafix-Worklist-Graph-Sparse.html#t:Ref">Ref</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Dense" class="def">Dense</a> :: <a href="Datafix-Explicit.html#t:Node">Node</a> -&gt; <a href="Datafix-Worklist-Internal.html#t:Density">Density</a> <a href="Datafix-Worklist-Graph-Dense.html#t:Ref">Ref</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:AbortionFunction" class="def">AbortionFunction</a> domain = <a href="Datafix-Utils-TypeLevel.html#t:Arrows">Arrows</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain -&gt; <a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) <a href="src/Datafix.Worklist.Internal.html#AbortionFunction" class="link">Source</a> <a href="#t:AbortionFunction" class="selflink">#</a></p><div class="doc"><p>A function that computes a sufficiently conservative approximation
 of a point in the abstract domain for when the solution algorithm
 decides to have iterated the node often enough.</p><p>When <code>domain</code> is a 'BoundedMeetSemilattice'/'BoundedLattice', the
 simplest abortion function would be to constantly return <code>top</code>.</p><p>As is the case for <code><a href="Datafix-Common.html#t:LiftedFunc">LiftedFunc</a></code> and <code><a href="Datafix-Common.html#t:ChangeDetector">ChangeDetector</a></code>, this
 carries little semantic meaning if viewed in isolation, so here
 are a few examples for how the synonym expands:</p><pre>  AbortionFunction Int ~ Int -&gt; Int
  AbortionFunction (String -&gt; Int) ~ String -&gt; Int -&gt; Int
  AbortionFunction (a -&gt; b -&gt; c -&gt; PowerSet) ~ a -&gt; b -&gt; c -&gt; PowerSet -&gt; PowerSet
</pre><p>E.g., the current value of the point is passed in (the tuple <code>(a, b, c, PowerSet)</code>)
 and the function returns an appropriate conservative approximation in that
 point.</p></div></div><div class="top"><p class="src"><a id="v:abortWithTop" class="def">abortWithTop</a> :: <span class="keyword">forall</span> domain. <a href="Datafix-Utils-TypeLevel.html#t:Currying">Currying</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain -&gt; <a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) =&gt; BoundedMeetSemiLattice (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) =&gt; <a href="Datafix-Worklist-Internal.html#t:AbortionFunction">AbortionFunction</a> domain <a href="src/Datafix.Worklist.Internal.html#abortWithTop" class="link">Source</a> <a href="#v:abortWithTop" class="selflink">#</a></p><div class="doc"><p>Aborts iteration of a value by <code><a href="../base-4.10.1.0/Data-Function.html#v:const">const</a></code>antly returning the <code>top</code> element
 of the assumed <code>BoundedMeetSemiLattice</code> of the <code><a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:IterationBound" class="def">IterationBound</a> domain <a href="src/Datafix.Worklist.Internal.html#IterationBound" class="link">Source</a> <a href="#t:IterationBound" class="selflink">#</a></p><div class="doc"><p>Expresses that iteration should or shouldn't stop after a point has
 been iterated a finite number of times.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NeverAbort" class="def">NeverAbort</a></td><td class="doc"><p>Will keep on iterating until a precise, yet conservative approximation
 has been reached. Make sure that your <code>domain</code> satisfies the
 <a href="https://en.wikipedia.org/wiki/Ascending_chain_condition">ascending chain condition</a>,
 e.g. that fixed-point iteration always comes to a halt!</p></td></tr><tr><td class="src"><a id="v:AbortAfter" class="def">AbortAfter</a> <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> (<a href="Datafix-Worklist-Internal.html#t:AbortionFunction">AbortionFunction</a> domain)</td><td class="doc"><p>For when your <code>domain</code> doesn't satisfy the ascending chain condition
 or when you are sensitive about solution performance.</p><p>The <code><a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></code>eger determines the maximum number of iterations of a single point
 of a <code><a href="Datafix-Explicit.html#t:Node">Node</a></code> (with which an entire function with many points may be associated)
 before iteration aborts in that point by calling the supplied <code><a href="Datafix-Worklist-Internal.html#t:AbortionFunction">AbortionFunction</a></code>.
 The responsibility of the <code><a href="Datafix-Worklist-Internal.html#t:AbortionFunction">AbortionFunction</a></code> is to find a sufficiently
 conservative approximation for the current value at that point.</p><p>When your <code><a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a></code> is an instance of <code>BoundedMeetSemiLattice</code>,
 <code><a href="Datafix-Worklist-Internal.html#v:abortWithTop">abortWithTop</a></code> might be a worthwhile option.
 A more sophisticated solution would trim the current value to a certain
 cut-off depth, depending on the first parameter, instead.</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:zoomIORef" class="def">zoomIORef</a> :: <a href="../transformers-0.5.2.0/Control-Monad-Trans-State-Strict.html#t:State">State</a> s a -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="../base-4.10.1.0/Data-IORef.html#t:IORef">IORef</a> s) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a <a href="src/Datafix.Worklist.Internal.html#zoomIORef" class="link">Source</a> <a href="#v:zoomIORef" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:zoomReferencedPoints" class="def">zoomReferencedPoints</a> :: <a href="../transformers-0.5.2.0/Control-Monad-Trans-State-Strict.html#t:State">State</a> (IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain))) a -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a <a href="src/Datafix.Worklist.Internal.html#zoomReferencedPoints" class="link">Source</a> <a href="#v:zoomReferencedPoints" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:zoomUnstable" class="def">zoomUnstable</a> :: <a href="../transformers-0.5.2.0/Control-Monad-Trans-State-Strict.html#t:State">State</a> (IntArgsMonoSet (<a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain))) a -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a <a href="src/Datafix.Worklist.Internal.html#zoomUnstable" class="link">Source</a> <a href="#v:zoomUnstable" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:enqueueUnstable" class="def">enqueueUnstable</a> :: k ~ <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) =&gt; <a href="Datafix-MonoMap.html#t:MonoMapKey">MonoMapKey</a> k =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; k -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Datafix.Worklist.Internal.html#enqueueUnstable" class="link">Source</a> <a href="#v:enqueueUnstable" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:deleteUnstable" class="def">deleteUnstable</a> :: k ~ <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) =&gt; <a href="Datafix-MonoMap.html#t:MonoMapKey">MonoMapKey</a> k =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; k -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Datafix.Worklist.Internal.html#deleteUnstable" class="link">Source</a> <a href="#v:deleteUnstable" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:highestPriorityUnstableNode" class="def">highestPriorityUnstableNode</a> :: k ~ <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) =&gt; <a href="Datafix-MonoMap.html#t:MonoMapKey">MonoMapKey</a> k =&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a>, k)) <a href="src/Datafix.Worklist.Internal.html#highestPriorityUnstableNode" class="link">Source</a> <a href="#v:highestPriorityUnstableNode" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:withCall" class="def">withCall</a> :: <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a <a href="src/Datafix.Worklist.Internal.html#withCall" class="link">Source</a> <a href="#v:withCall" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:recompute" class="def">recompute</a> :: <span class="keyword">forall</span> domain graph dom cod depm. dom ~ <a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain =&gt; cod ~ <a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain =&gt; depm ~ <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain =&gt; <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> dom -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> cod <a href="src/Datafix.Worklist.Internal.html#recompute" class="link">Source</a> <a href="#v:recompute" class="selflink">#</a></p><div class="doc"><p>The first of the two major functions of this module.</p><p><code>recompute node args</code> iterates the value of the passed <code>node</code>
 at the point <code>args</code> by invoking its transfer function.
 It does so in a way that respects the <code><a href="Datafix-Worklist-Internal.html#t:IterationBound">IterationBound</a></code>.</p><p>This function is not exported, and is only called by <code><a href="Datafix-Worklist-Internal.html#v:work">work</a></code>
 and <code><a href="Datafix-Worklist-Internal.html#v:dependOn">dependOn</a></code>, for when the iteration strategy decides that
 the <code>node</code> needs to be (and can be) re-iterated.
 It performs tracking of which <code><a href="Datafix-Explicit.html#t:Node">Node</a></code>s the transfer function
 depended on, do that the worklist algorithm can do its magic.</p></div></div><div class="top"><p class="src"><a id="v:dependOn" class="def">dependOn</a> :: <span class="keyword">forall</span> domain graph depm. depm ~ <a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Explicit.html#t:Node">Node</a> -&gt; <a href="Datafix-Common.html#t:LiftedFunc">LiftedFunc</a> domain depm <a href="src/Datafix.Worklist.Internal.html#dependOn" class="link">Source</a> <a href="#v:dependOn" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:optimisticApproximation" class="def">optimisticApproximation</a> :: <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) <a href="src/Datafix.Worklist.Internal.html#optimisticApproximation" class="link">Source</a> <a href="#v:optimisticApproximation" class="selflink">#</a></p><div class="doc"><p>Compute an optimistic approximation for a point of a given node that is
 as precise as possible, given the other points of that node we already
 computed.</p><p>E.g., it is always valid to return <code>bottom</code> from this, but in many cases
 we can be more precise since we possibly have computed points for the node
 that are lower bounds to the current point.</p></div></div><div class="top"><p class="src"><a id="v:scheme1" class="def">scheme1</a> :: <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) <a href="src/Datafix.Worklist.Internal.html#scheme1" class="link">Source</a> <a href="#v:scheme1" class="selflink">#</a></p><div class="doc"><p>scheme 1 (see <a href="https://github.com/sgraf812/journal/blob/09f0521dbdf53e7e5777501fc868bb507f5ceb1a/datafix.md.html#how-an-algorithm-that-can-do-3-looks-like)">https://github.com/sgraf812/journal/blob/09f0521dbdf53e7e5777501fc868bb507f5ceb1a/datafix.md.html#how-an-algorithm-that-can-do-3-looks-like)</a>.</p><p>Let the worklist algorithm figure things out.</p></div></div><div class="top"><p class="src"><a id="v:scheme2" class="def">scheme2</a> :: <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Datafix-Utils-TypeLevel.html#t:Products">Products</a> (<a href="Datafix-Utils-TypeLevel.html#t:ParamTypes">ParamTypes</a> domain) -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> (<a href="Datafix-Utils-TypeLevel.html#t:ReturnType">ReturnType</a> domain) <a href="src/Datafix.Worklist.Internal.html#scheme2" class="link">Source</a> <a href="#v:scheme2" class="selflink">#</a></p><div class="doc"><p>scheme 2 (see <a href="https://github.com/sgraf812/journal/blob/09f0521dbdf53e7e5777501fc868bb507f5ceb1a/datafix.md.html#how-an-algorithm-that-can-do-3-looks-like)">https://github.com/sgraf812/journal/blob/09f0521dbdf53e7e5777501fc868bb507f5ceb1a/datafix.md.html#how-an-algorithm-that-can-do-3-looks-like)</a>.</p><p>Descend into \(\bot\) nodes when there is no cycle to discover the set of
 reachable nodes as quick as possible.
 Do *not* descend into unstable, non-(bot) nodes.</p></div></div><div class="top"><p class="src"><a id="v:whileJust_" class="def">whileJust_</a> :: <a href="../base-4.10.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; m (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) -&gt; (a -&gt; m b) -&gt; m () <a href="src/Datafix.Worklist.Internal.html#whileJust_" class="link">Source</a> <a href="#v:whileJust_" class="selflink">#</a></p><div class="doc"><p>As long as the supplied <a href="Maybe.html">Maybe</a> expression returns &quot;Just _&quot;, the loop
 body will be called and passed the value contained in the <code><a href="../base-4.10.1.0/Data-Maybe.html#v:Just">Just</a></code>.  Results
 are discarded.</p><p>Taken from <code><a href="Control-Monad-Loops.html#v:whileJust_">whileJust_</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:work" class="def">work</a> :: <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph =&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain =&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Datafix-Worklist-Internal.html#t:Env">Env</a> graph domain) <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Datafix.Worklist.Internal.html#work" class="link">Source</a> <a href="#v:work" class="selflink">#</a></p><div class="doc"><p>Defined as 'work = whileJust_ highestPriorityUnstableNode (uncurry recompute)'.</p><p>Tries to dequeue the <code><a href="Datafix-Worklist-Internal.html#v:highestPriorityUnstableNode">highestPriorityUnstableNode</a></code> and <code><a href="Datafix-Worklist-Internal.html#v:recompute">recompute</a></code>s the value of
 one of its <code><a href="Datafix-Worklist-Internal.html#v:unstable">unstable</a></code> points, until the worklist is empty, indicating that a
 fixed-point has been reached.</p></div></div><div class="top"><p class="src"><a id="v:solveProblem" class="def">solveProblem</a> <a href="src/Datafix.Worklist.Internal.html#solveProblem" class="link">Source</a> <a href="#v:solveProblem" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Datafix-Worklist-Graph.html#t:GraphRef">GraphRef</a> graph</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Datafix-Common.html#t:Datafixable">Datafixable</a> domain</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Datafix-Explicit.html#t:DataFlowProblem">DataFlowProblem</a> (<a href="Datafix-Worklist-Internal.html#t:DependencyM">DependencyM</a> graph domain)</td><td class="doc"><p>The description of the <code>DataFlowProblem</code> to solve.</p></td></tr><tr><td class="src">-&gt; <a href="Datafix-Worklist-Internal.html#t:Density">Density</a> graph</td><td class="doc"><p>Describes if the algorithm is free to use a <code><a href="Datafix-Worklist-Internal.html#v:Dense">Dense</a></code>, <code>Vector</code>-based
 graph representation or has to go with a <code><a href="Datafix-Worklist-Internal.html#v:Sparse">Sparse</a></code> one based on <code>IntMap</code>.</p></td></tr><tr><td class="src">-&gt; <a href="Datafix-Worklist-Internal.html#t:IterationBound">IterationBound</a> domain</td><td class="doc"><p>Whether the solution algorithm should respect a maximum bound on the
 number of iterations per point. Pass <code><a href="Datafix-Worklist-Internal.html#v:NeverAbort">NeverAbort</a></code> if you don't care.</p></td></tr><tr><td class="src">-&gt; <a href="Datafix-Explicit.html#t:Node">Node</a></td><td class="doc"><p>The <code>Node</code> that is initially assumed to be unstable. This should be
 the <code>Node</code> you are interested in, e.g. <code>Node 42</code> if you are interested
 in the value of <code>fib 42</code> for a hypothetical <code>fibProblem</code>, or the
 <code>Node</code> denoting the root expression of your data-flow analysis
 you specified via the <code>DataFlowProblem</code>.</p></td></tr><tr><td class="src">-&gt; domain</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Computes a solution to the described <code><a href="Datafix-Explicit.html#t:DataFlowProblem">DataFlowProblem</a></code> by iterating
 transfer functions until a fixed-point is reached.</p><p>It does do by employing a worklist algorithm, iterating unstable <code><a href="Datafix-Explicit.html#t:Node">Node</a></code>s
 only.
 <code><a href="Datafix-Explicit.html#t:Node">Node</a></code>s become unstable when the point of another <code><a href="Datafix-Explicit.html#t:Node">Node</a></code> their transfer function
 <code><a href="Datafix-Worklist-Internal.html#v:dependOn">dependOn</a></code>ed changed.</p><p>The sole initially unstable <code><a href="Datafix-Explicit.html#t:Node">Node</a></code> is the last parameter, and if your
 <code>domain</code> is function-valued (so the returned <code><a href="Datafix-Utils-TypeLevel.html#t:Arrows">Arrows</a></code> expands to a function),
 then any further parameters specify the exact point in the <code><a href="Datafix-Explicit.html#t:Node">Node</a></code>s transfer
 function you are interested in.</p><p>If your problem only has finitely many different <code><a href="Datafix-Explicit.html#t:Node">Node</a></code>s , consider using
 the <code>ProblemBuilder</code> API (e.g. <code>datafix</code> + <code>evalDenotation</code>) for a higher-level API
 that let's you forget about <code><a href="Datafix-Explicit.html#t:Node">Node</a></code>s and instead let's you focus on building
 more complex data-flow frameworks.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>